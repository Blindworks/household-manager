<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="20260206-0004" author="household-manager">
        <comment>Add reading_week column to meter_readings table</comment>

        <addColumn tableName="meter_readings">
            <column name="reading_week" type="INT"/>
        </addColumn>

        <createIndex indexName="idx_meter_readings_week" tableName="meter_readings">
            <column name="reading_week"/>
        </createIndex>

        <rollback>
            <dropIndex indexName="idx_meter_readings_week" tableName="meter_readings"/>
            <dropColumn tableName="meter_readings" columnName="reading_week"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
